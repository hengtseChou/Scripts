#!/bin/bash
# Find all .Rhistory and .RData files excluding $HOME/.pyenv and its subdirectories
files_to_delete=$(fd -H --type f "(Rhistory|RData)")

# Check if any .Rhistory or .RData files were found
if [ -z "$files_to_delete" ]; then
  echo "No .Rhistory or .RData files found."
  exit 0
fi

# List the found .Rhistory and .RData files, each on a new line
echo "The following .Rhistory and .RData files were found:"
echo "$files_to_delete" | tr ' ' '\n'

# Prompt the user for confirmation to delete the files, default to yes
read -p "Do you want to delete all of these files? (yes/no) [yes]: " confirm

# Default to 'yes' if the user presses Enter
confirm=${confirm:-yes}

# If the user confirms, proceed with deletion
if [ "$confirm" == "yes" ]; then
  # Delete .Rhistory and .RData files
  echo "$files_to_delete" | while read -r file; do
    if trash "$file"; then
      echo "Deleted: $file"
    else
      echo "Failed to delete: $file"
    fi
  done
else
  echo "Deletion aborted."
fi
